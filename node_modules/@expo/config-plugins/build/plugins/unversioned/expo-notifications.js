"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.withNotifications = void 0;
const Notifications_1 = require("../../android/Notifications");
const ios_plugins_1 = require("../ios-plugins");
const withRunOnce_1 = require("../withRunOnce");
const withStaticPlugin_1 = require("../withStaticPlugin");
const packageName = 'expo-notifications';
const withNotifications = config => {
    return withStaticPlugin_1.withStaticPlugin(config, {
        _isLegacyPlugin: true,
        plugin: packageName,
        // If the static plugin isn't found, use the unversioned one.
        fallback: withUnversionedNotifications,
    });
};
exports.withNotifications = withNotifications;
const withNotificationsEntitlement = (config, mode) => {
    return ios_plugins_1.withEntitlementsPlist(config, config => {
        config.modResults['aps-environment'] = mode;
        return config;
    });
};
const withUnversionedNotifications = withRunOnce_1.createRunOncePlugin(config => {
    // Android
    config = Notifications_1.withNotificationManifest(config);
    config = Notifications_1.withNotificationIconColor(config);
    config = Notifications_1.withNotificationIcons(config);
    // iOS
    config = withNotificationsEntitlement(config, 'development');
    return config;
}, packageName);
exports.default = exports.withNotifications;
//# sourceMappingURL=expo-notifications.js.map