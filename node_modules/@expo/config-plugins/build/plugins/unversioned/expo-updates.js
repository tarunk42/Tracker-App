"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.withUpdates = void 0;
const Updates_1 = require("../../android/Updates");
const Updates_2 = require("../../ios/Updates");
const withRunOnce_1 = require("../withRunOnce");
const withStaticPlugin_1 = require("../withStaticPlugin");
// Local unversioned updates plugin
const packageName = 'expo-updates';
const withUpdates = (config, props) => {
    return withStaticPlugin_1.withStaticPlugin(config, {
        _isLegacyPlugin: true,
        // Pass props to the static plugin if it exists.
        plugin: [packageName, props],
        // If the static plugin isn't found, use the unversioned one.
        fallback: config => withUnversionedUpdates(config, props),
    });
};
exports.withUpdates = withUpdates;
const withUnversionedUpdates = withRunOnce_1.createRunOncePlugin((config, props) => {
    config = Updates_1.withUpdates(config, props);
    config = Updates_2.withUpdates(config, props);
    return config;
}, packageName);
exports.default = exports.withUpdates;
//# sourceMappingURL=expo-updates.js.map